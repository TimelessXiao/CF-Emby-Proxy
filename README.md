# CF-Emby-Proxy

<div align="center">

**åŸºäº Cloudflare Workers çš„ Emby åª’ä½“æœåŠ¡å™¨æ™ºèƒ½åŠ é€Ÿä»£ç†**

[![License: ISC](https://img.shields.io/badge/License-ISC-blue.svg)](https://opensource.org/licenses/ISC)
[![Cloudflare Workers](https://img.shields.io/badge/Cloudflare-Workers-F38020?logo=cloudflare)](https://workers.cloudflare.com/)
[![Node.js](https://img.shields.io/badge/Node.js-%3E%3D18-339933?logo=node.js)](https://nodejs.org/)

åˆ©ç”¨ Cloudflare å…¨çƒè¾¹ç¼˜ç½‘ç»œåŠ é€Ÿ Emby è®¿é—®ï¼Œæ™ºèƒ½ç¼“å­˜ç­–ç•¥æ˜¾è‘—æå‡ç”¨æˆ·ä½“éªŒ

[åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [é…ç½®è¯´æ˜](#-é…ç½®è¯´æ˜) â€¢ [å¸¸è§é—®é¢˜](#-å¸¸è§é—®é¢˜)

</div>

---

## ğŸ“Œ é¡¹ç›®äº®ç‚¹

- ğŸš€ **æ™ºèƒ½ç¼“å­˜**ï¼šPlaybackInfo POST ç¼“å­˜ã€API è¾¹ç¼˜ç¼“å­˜ã€å›¾ç‰‡é•¿æœŸç¼“å­˜å…¨é¢åŠ é€Ÿ
- ğŸŒ **åŠ¨æ€è·¯ç”±**ï¼šå¤š Emby æœåŠ¡å™¨åŠ¨æ€åˆ‡æ¢ï¼Œæ”¯æŒå­åŸŸåæ˜ å°„ï¼ˆ`*.yourdomain.com`ï¼‰
- ğŸ” **å®‰å…¨éš”ç¦»**ï¼šToken çº§ç¼“å­˜é”®éš”ç¦»ï¼Œé˜²æ­¢è·¨ç”¨æˆ·æ•°æ®æ³„éœ²
- âš¡ **æ€§èƒ½ä¼˜åŒ–**ï¼šé¦–åŒ…è¶…æ—¶æ§åˆ¶ã€å¢é‡æµå¼ç¼“å†²ã€ä¸‰çº§è·¯ç”±ç¼“å­˜
- ğŸ› ï¸ **ä¸€é”®éƒ¨ç½²**ï¼šäº¤äº’å¼è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œä»é›¶åˆ°éƒ¨ç½²åªéœ€ 3 åˆ†é’Ÿ
- ğŸ“Š **å¯è§‚æµ‹æ€§**ï¼šServer-Timing æ€§èƒ½æŒ‡æ ‡ + æ’­æ”¾å™¨è¯†åˆ«è¯Šæ–­

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½

#### ğŸ¯ æ™ºèƒ½ç¼“å­˜ç³»ç»Ÿ

**PlaybackInfo POST ç¼“å­˜**
- æ”¯æŒæ—  Content-Length å¤´çš„ chunked è¯·æ±‚ç¼“å­˜
- 65KB ç¡¬é™åˆ¶å¢é‡ç¼“å†²ï¼Œé˜²æ­¢èµ„æºè€—å°½
- 3 ç§’ TTL å¾®ç¼“å­˜ï¼Œæ˜¾è‘—æ”¹å–„èµ·æ’­å»¶è¿Ÿ

**API è¾¹ç¼˜ç¼“å­˜**
- è¦†ç›–æºç«™ `Cache-Control: private/no-store` é™åˆ¶
- ç™½åå•ç«¯ç‚¹ï¼š`/Items/Resume`ã€`/Items/Latest`ã€`/Views`ã€`/NextUp`
- 10 ç§’è¾¹ç¼˜ç¼“å­˜ï¼Œé¿å…æµè§ˆå™¨é™ˆæ—§æ•°æ®

**å›¾ç‰‡ç¼“å­˜**
- Tag å›¾ç‰‡åŒ¿åç¼“å­˜ï¼š1 å¹´é•¿æœŸç¼“å­˜ + `immutable` æ ‡è®°
- ç©º Tag å›¾ç‰‡çŸ­æœŸç¼“å­˜ï¼š90 ç§’è¾¹ç¼˜ç¼“å­˜ï¼Œå‡å°‘åˆ‡æ¢åª’ä½“åº“æ—¶çš„é”™è¯¯
- ä¸¥æ ¼éšç§ä¿æŠ¤ï¼šè‡ªåŠ¨æ’é™¤ `/Users/` å’Œ `/Persons/` è·¯å¾„

**ä¼ ç»Ÿç¼“å­˜ç­–ç•¥**
- é™æ€èµ„æºï¼šToken éš”ç¦» + 1 å¹´é•¿æœŸç¼“å­˜
- M3U8 æ’­æ”¾åˆ—è¡¨ï¼š2 ç§’å¾®ç¼“å­˜ + Token éš”ç¦»
- è§†é¢‘æµ/Range è¯·æ±‚ï¼šç›´è¿é€ä¼ ï¼Œä¸ç¼“å­˜
- WebSocketï¼šå®Œæ•´æ”¯æŒï¼Œå®æ—¶é€šä¿¡

#### ğŸŒ åŠ¨æ€è·¯ç”±ç®¡ç†

- **å¤šæœåŠ¡å™¨æ”¯æŒ**ï¼šåŸºäºå­åŸŸåè‡ªåŠ¨åˆ‡æ¢ä¸Šæ¸¸æœåŠ¡å™¨
- **çƒ­æ›´æ–°**ï¼šé€šè¿‡ Web ç®¡ç†ç•Œé¢å®æ—¶ä¿®æ”¹è·¯ç”±ï¼Œæ— éœ€é‡æ–°éƒ¨ç½²
- **KV å­˜å‚¨**ï¼šè·¯ç”±é…ç½®å­˜å‚¨åœ¨ Cloudflare KVï¼Œå…¨çƒåŒæ­¥
- **ä¸‰çº§ç¼“å­˜**ï¼šL1 å†…å­˜ç¼“å­˜ï¼ˆ60sï¼‰+ L2 è¾¹ç¼˜ç¼“å­˜ï¼ˆè½¯ TTL 60sï¼‰+ L3 KV å­˜å‚¨
- **ç®¡ç†ç•Œé¢**ï¼šè®¿é—® `/manage` è¿›è¡Œå¯è§†åŒ–è·¯ç”±ç®¡ç†

**ä½¿ç”¨åœºæ™¯**ï¼š
```
emby1.yourdomain.com â†’ æœåŠ¡å™¨ A (https://server-a.example.com)
emby2.yourdomain.com â†’ æœåŠ¡å™¨ B (https://server-b.example.com/emby)
default              â†’ é»˜è®¤æœåŠ¡å™¨ (https://main-emby.example.com)
```

#### ğŸ”’ å®‰å…¨ä¸éšç§

- **Token-Aware ç¼“å­˜é”®**ï¼šSHA-256(token:deviceId) ç¡®ä¿ç”¨æˆ·éš”ç¦»
- **RFC 7230 å…¼å®¹**ï¼šè‡ªåŠ¨æ¸…ç† Hop-by-Hop å¤´ï¼ˆWebSocket ä¿æŠ¤ï¼‰
- **ç®¡ç†ç•Œé¢è®¤è¯**ï¼šBearer Token è®¤è¯ä¿æŠ¤ `/manage` ç«¯ç‚¹
- **åŒ¿åè¯·æ±‚é˜²æŠ¤**ï¼šæ—  token çš„é™æ€èµ„æºå¼ºåˆ¶ `no-store`

#### âš¡ æ€§èƒ½ä¼˜åŒ–

- **åª’ä½“ TTFB è¶…æ—¶**ï¼šRange è¯·æ±‚ 8 ç§’é¦–åŒ…è¶…æ—¶ + 1 æ¬¡é‡è¯•ï¼Œé¿å…å¡æ­»
- **å¢é‡æµå¼ç¼“å†²**ï¼š65KB/256KB åˆ†æ®µç¼“å†²ï¼Œé˜²æ­¢å†…å­˜è€—å°½
- **CPU ä¼˜åŒ–å“ˆå¸Œ**ï¼šä»…åœ¨éœ€è¦ç¼“å­˜é”®æ—¶è®¡ç®— tokenHash
- **5xx å›¾ç‰‡é™çº§**ï¼šæºç«™é”™è¯¯æ—¶è¿”å› 1x1 é€æ˜ PNGï¼Œé¿å… UI ç ´æŸ

#### ğŸ“Š å¯è§‚æµ‹æ€§

- **Server-Timing æŒ‡æ ‡**ï¼šè¯·æ±‚ç±»å‹ã€æ’­æ”¾å™¨è¯†åˆ«ã€KV è¯»å–è€—æ—¶ã€ç¼“å­˜å‘½ä¸­ã€ä¸Šæ¸¸å“åº”è€—æ—¶ã€é‡è¯•æ¬¡æ•°
- **DEBUG é‡‡æ ·**ï¼š10% é‡‡æ ·ç‡é˜²æ­¢ header è†¨èƒ€ï¼ˆåª’ä½“è¯·æ±‚å§‹ç»ˆè®°å½•ï¼‰
- **æ’­æ”¾å™¨è¯†åˆ«**ï¼šæ”¯æŒ Infuseã€ExoPlayerã€MPVã€Roku ç­‰ 15 ç§å®¢æˆ·ç«¯

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- **Node.js** â‰¥ 18.x
- **Cloudflare è´¦å·**ï¼ˆå…è´¹ç‰ˆå³å¯ï¼‰
- **Emby æœåŠ¡å™¨**ï¼ˆä»»æ„ç‰ˆæœ¬ï¼‰

### è‡ªåŠ¨åŒ–å®‰è£…ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/TimelessXiao/CF-Emby-Proxy.git
cd CF-Emby-Proxy

# 2. è¿è¡Œè‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆåŒ…å«è®¤è¯ã€KV åˆ›å»ºã€é…ç½®ç”Ÿæˆï¼‰
npm run setup
```

è„šæœ¬å°†è‡ªåŠ¨å®Œæˆï¼š
- âœ… å®‰è£… npm ä¾èµ–
- âœ… ç™»å½• Cloudflareï¼ˆæµè§ˆå™¨æˆæƒæˆ– API Tokenï¼‰
- âœ… åˆ›å»º KV Namespaceï¼ˆæˆ–ä½¿ç”¨ç°æœ‰ï¼‰
- âœ… ç”Ÿæˆ `wrangler.json` é…ç½®æ–‡ä»¶
- âœ… è®¾ç½® `ADMIN_TOKEN` å¯†é’¥
- âœ… éªŒè¯é…ç½®å®Œæ•´æ€§

### éƒ¨ç½²åˆ° Cloudflare

```bash
npm run deploy
```

éƒ¨ç½²æˆåŠŸåï¼Œä½ å°†çœ‹åˆ°ï¼š

```
âœ¨ Successfully published your Worker to
  https://your-worker-name.your-subdomain.workers.dev
```

### é…ç½®è‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼‰

1. åœ¨ Cloudflare æ§åˆ¶å°æ·»åŠ ä½ çš„åŸŸå
2. è¿›å…¥ **Workers & Pages** â†’ é€‰æ‹©ä½ çš„ Worker
3. **è®¾ç½®** â†’ **è§¦å‘å™¨** â†’ **æ·»åŠ è‡ªå®šä¹‰åŸŸå**
4. è¾“å…¥åŸŸåï¼ˆå¦‚ `emby.yourdomain.com` æˆ– `*.emby.yourdomain.com`ï¼‰

---

## âš™ï¸ é…ç½®è¯´æ˜

### æ ¸å¿ƒé…ç½®é¡¹

ç¼–è¾‘ `wrangler.json` ä¸­çš„ç¯å¢ƒå˜é‡ï¼š

| é…ç½®é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|-------|------|--------|
| `UPSTREAM_URL` | é»˜è®¤ä¸Šæ¸¸ Emby æœåŠ¡å™¨åœ°å€ | `https://your-emby-server.com` |
| `DEBUG` | å¯ç”¨è¯¦ç»†æ€§èƒ½æ—¥å¿— | `false` |

### é«˜çº§é…ç½®ï¼ˆsrc/worker.jsï¼‰

ç¼–è¾‘ `src/worker.js` ä¸­çš„ `CONFIG` å¯¹è±¡ï¼š

| é…ç½®é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|-------|------|--------|
| `API_TIMEOUT` | æ™®é€š API è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰ | 6000 |
| `CRITICAL_TIMEOUT` | å…³é”®è·¯å¾„è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰ | 9000 |
| `M3U8_TTL` | M3U8 æ’­æ”¾åˆ—è¡¨ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰ | 2 |
| `PLAYBACKINFO_TTL` | PlaybackInfo ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰ | 3 |
| `MEDIA_TTFB_TIMEOUT_MS` | åª’ä½“é¦–åŒ…è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰ | 8000 |
| `EMPTY_TAG_IMAGE_TTL_S` | ç©º tag å›¾ç‰‡ç¼“å­˜ï¼ˆç§’ï¼‰ | 90 |
| `ROUTE_L1_TTL_S` | è·¯ç”±è¡¨å†…å­˜ç¼“å­˜ï¼ˆç§’ï¼‰ | 60 |

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è¯¦ç»†æ€§èƒ½æ—¥å¿—ï¼š

```bash
npx wrangler secret put DEBUG
# è¾“å…¥: true
```

éƒ¨ç½²åï¼Œå“åº”å¤´å°†åŒ…å« `Server-Timing`ï¼š

```
Server-Timing: kind;desc="playbackinfo", player_hint;desc="exoplayer", kv_read;dur=12, cache_hit;desc="1", upstream;dur=0
```

---

## ğŸ—ºï¸ åŠ¨æ€è·¯ç”±ç®¡ç†

### ç®¡ç†ç•Œé¢

è®¿é—® `https://your-worker.workers.dev/manage`ï¼ˆæˆ–ä½ çš„è‡ªå®šä¹‰åŸŸå + `/manage`ï¼‰

**è®¤è¯**ï¼šä½¿ç”¨éƒ¨ç½²æ—¶è®¾ç½®çš„ `ADMIN_TOKEN`

### è·¯ç”±é…ç½®ç¤ºä¾‹

```json
{
  "stream1": {
    "upstream": "https://emby-server-1.example.com",
    "pathPrefix": ""
  },
  "stream2": {
    "upstream": "https://emby-server-2.example.com",
    "pathPrefix": "/emby"
  },
  "default": {
    "upstream": "https://main-emby.example.com",
    "pathPrefix": ""
  }
}
```

**è·¯ç”±é€»è¾‘**ï¼š
- `stream1.yourdomain.com` â†’ `emby-server-1.example.com`
- `stream2.yourdomain.com` â†’ `emby-server-2.example.com/emby`
- `yourdomain.com` æˆ–å…¶ä»–å­åŸŸ â†’ `main-emby.example.com`

---

## ğŸ”§ å¼€å‘ä¸è°ƒè¯•

### æœ¬åœ°å¼€å‘

```bash
npm run dev
```

Worker å°†åœ¨æœ¬åœ°è¿è¡Œï¼Œè®¿é—® `http://localhost:8787`

**æ³¨æ„**ï¼šæœ¬åœ°æ¨¡å¼ä½¿ç”¨ `--remote` æ ‡å¿—è¿æ¥çœŸå® KVï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚

### æ—¥å¿—æŸ¥çœ‹

```bash
# å®æ—¶æŸ¥çœ‹ç”Ÿäº§æ—¥å¿—
npx wrangler tail

# è¿‡æ»¤ç‰¹å®šè¯·æ±‚
npx wrangler tail --format pretty | grep "PlaybackInfo"
```

---

## ğŸ› å¸¸è§é—®é¢˜

<details>
<summary><strong>Q: è§†é¢‘æ’­æ”¾å¡é¡¿/æ— æ³•æ’­æ”¾ï¼Ÿ</strong></summary>

**A**: è§†é¢‘æµé‡‡ç”¨ç›´è¿é€ä¼ ç­–ç•¥ï¼Œä¸ç»è¿‡ç¼“å­˜ã€‚å¯èƒ½åŸå› ï¼š
1. æºç«™ç½‘ç»œé—®é¢˜ï¼šæ£€æŸ¥ Emby æœåŠ¡å™¨ç½‘ç»œçŠ¶å†µ
2. è¶…æ—¶é…ç½®ä¸è¶³ï¼šå°è¯•å¢åŠ è¶…æ—¶æ—¶é—´

**è§£å†³æ–¹æ¡ˆ**ï¼š
```javascript
// src/worker.js è°ƒæ•´è¶…æ—¶
API_TIMEOUT: 8000,  // å¢åŠ åˆ° 8 ç§’
CRITICAL_TIMEOUT: 12000,  // å¢åŠ åˆ° 12 ç§’
MEDIA_TTFB_TIMEOUT_MS: 10000  // å¢åŠ åª’ä½“é¦–åŒ…è¶…æ—¶åˆ° 10 ç§’
```
</details>

<details>
<summary><strong>Q: ç®¡ç†ç•Œé¢æ— æ³•è®¿é—®ï¼ˆ401 Unauthorizedï¼‰ï¼Ÿ</strong></summary>

**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. ç¡®è®¤å·²è®¾ç½® `ADMIN_TOKEN`ï¼š
   ```bash
   npx wrangler secret list
   # åº”è¯¥çœ‹åˆ° ADMIN_TOKEN
   ```
2. é‡æ–°è®¾ç½®å¯†é’¥ï¼š
   ```bash
   npx wrangler secret put ADMIN_TOKEN
   ```
3. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼Œä½¿ç”¨æ— ç—•æ¨¡å¼é‡æ–°è¾“å…¥ Token
</details>

<details>
<summary><strong>Q: PlaybackInfo ç¼“å­˜æœªç”Ÿæ•ˆï¼ˆä»ç„¶å¾ˆæ…¢ï¼‰ï¼Ÿ</strong></summary>

**A**: æ’æŸ¥æ­¥éª¤ï¼š
1. æ£€æŸ¥å®¢æˆ·ç«¯æ˜¯å¦å‘é€ `Content-Length`ï¼š
   ```bash
   npx wrangler tail | grep "PlaybackInfo"
   ```
2. ç¡®è®¤è¯·æ±‚ä½“ <65KBï¼šè¶…è¿‡æ­¤é™åˆ¶ä¼šå›é€€åˆ°éç¼“å­˜æ¨¡å¼
3. å¯ç”¨ DEBUG æ¨¡å¼æŸ¥çœ‹ `cache_hit` æŒ‡æ ‡
</details>

<details>
<summary><strong>Q: å›¾ç‰‡åŠ è½½æ…¢ï¼Œä½†åº”è¯¥æœ‰ç¼“å­˜ï¼Ÿ</strong></summary>

**A**: æ£€æŸ¥ï¼š
1. ç¡®è®¤ URL åŒ…å« `tag` å‚æ•°ï¼š
   ```
   /Items/123/Images/Primary?tag=abc123  âœ…
   /Items/123/Images/Primary             âŒï¼ˆæ—  tagï¼Œä»… 90 ç§’ç¼“å­˜ï¼‰
   ```
2. é¦–æ¬¡åŠ è½½å¿…å®šå›æºï¼ˆMISSï¼‰ï¼Œç¬¬äºŒæ¬¡åº”è¯¥ HIT
3. éªŒè¯ `cf-cache-status` å“åº”å¤´
</details>

<details>
<summary><strong>Q: å¤šè®¾å¤‡åŒæ­¥å»¶è¿Ÿï¼ˆResume ä½ç½®ä¸ä¸€è‡´ï¼‰ï¼Ÿ</strong></summary>

**A**: è¿™æ˜¯ 10 ç§’ API è¾¹ç¼˜ç¼“å­˜çš„é¢„æœŸè¡Œä¸ºï¼š
- è®¾å¤‡ A æš‚åœ â†’ 10 ç§’å†…è®¾å¤‡ B å¯èƒ½è¯»å–æ—§è¿›åº¦
- **å¯æ¥å—èŒƒå›´**ï¼š<10 ç§’å»¶è¿Ÿå¯¹ 99% ä½¿ç”¨åœºæ™¯æ— å½±å“
- **å¦‚éœ€å®æ—¶åŒæ­¥**ï¼šä¿®æ”¹ `API_CACHE_REGEX` æ’é™¤ Resume ç«¯ç‚¹

```javascript
// ç¦ç”¨ Resume ç¼“å­˜ï¼ˆå®æ—¶æ€§ä¼˜å…ˆï¼‰
API_CACHE_REGEX: /(\/Users\/.*\/Items\/Latest|\/Users\/.*\/Views|\/Shows\/NextUp)/i,
```
</details>

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ

- **Runtime**: Cloudflare Workersï¼ˆV8 Isolatesï¼‰
- **Framework**: [Hono](https://hono.dev/) - è½»é‡çº§ Web æ¡†æ¶
- **Storage**: Cloudflare KVï¼ˆè·¯ç”±é…ç½®ï¼‰ã€Cache APIï¼ˆå“åº”ç¼“å­˜ï¼‰
- **Language**: JavaScript ES2022

### æ ¸å¿ƒæ¨¡å—

```
src/
â”œâ”€â”€ worker.js       # ä¸»è¦ Worker ä»£ç ï¼ˆè·¯ç”±ã€ç¼“å­˜ã€ä»£ç†é€»è¾‘ï¼‰
â”œâ”€â”€ debug.js        # è°ƒè¯•å·¥å…·ç±»ï¼ˆServer-Timing æ³¨å…¥ï¼‰
â””â”€â”€ ui.js           # ç®¡ç†ç•Œé¢ HTML
```

### ç¼“å­˜æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Cloudflare Edge Network                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Browser     â”‚â”€â”€â”€â–¶â”‚  CF Worker   â”‚â”€â”€â”€â–¶â”‚ Origin Emby  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                            â”‚                                â”‚
â”‚                            â”œâ”€ L1: Edge Cache (Static 1yr)  â”‚
â”‚                            â”œâ”€ L2: Edge Cache (API 10s)     â”‚
â”‚                            â””â”€ L3: caches.default (POST 3s) â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Š Bugã€æå‡ºæ”¹è¿›å»ºè®®ï¼

### å¼€å‘æµç¨‹

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼š`git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹ï¼š`git commit -m 'Add amazing feature'`
4. æ¨é€åˆ†æ”¯ï¼š`git push origin feature/amazing-feature`
5. æäº¤ Pull Request

### ä»£ç è§„èŒƒ

- éµå¾ªç°æœ‰ä»£ç é£æ ¼ï¼ˆä¸­æ–‡æ³¨é‡Š + è‹±æ–‡ä»£ç ï¼‰
- æ–°å¢é…ç½®é¡¹æ·»åŠ åˆ° `CONFIG` å¯¹è±¡
- å…³é”®åŠŸèƒ½æ·»åŠ å¯¹åº”æµ‹è¯•åœºæ™¯è¯´æ˜

---

## ğŸ“„ è®¸å¯è¯

[ISC License](https://opensource.org/licenses/ISC)

Copyright (c) 2024-2026 CF-Emby-Proxy Contributors

---

## ğŸ™ è‡´è°¢

- linuxdo ç¤¾åŒºä½¬ nzh æä¾›çš„åŸé¡¹ç›®ï¼šhttps://github.com/fast63362/CF-Emby-Proxy

---

<div align="center">

**Made with â¤ï¸ for Emby Users**

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª â­ Starï¼

</div>
